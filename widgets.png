@Override
public void drawButton(Minecraft mc, int mouseX, int mouseY) {
    if (this.visible) {
        // Bind your custom button texture
        mc.getTextureManager().bindTexture(new ResourceLocation("astralassets:textures/gui/widgets.png"));
        FontRenderer fontRenderer = mc.fontRenderer;

        // Calculate hover and press state
        boolean isHovered = mouseX >= this.x && mouseY >= this.y && mouseX < this.x + this.width && mouseY < this.y + this.height;
        int state = 0; // 0 = normal

        if (isHovered) {
            if (Mouse.isButtonDown(0)) {
                state = 2; // pressed
            } else {
                state = 1; // hovered
            }
        }

        // Texture Y offset (assuming button slice height = 20px)
        int textureY = state * 20;

        // Optional offset to simulate "pressed down" effect
        int offset = (state == 2) ? 1 : 0;

        // Draw the textured button background
        drawTexturedModalRect(this.x + offset, this.y + offset, 0, textureY, this.width, this.height);

        // Set full alpha color values for text
        int textColor;
        switch (state) {
            case 2: textColor = 0xFFAAAAAA; break; // Pressed - dim gray
            case 1: textColor = 0xFFFFFFFF; break; // Hovered - bright white
            default: textColor = 0xFFE0E0E0; break; // Normal - soft white
        }

        // Safely draw button label
        if (this.displayString != null && !this.displayString.isEmpty()) {
            drawCenteredString(fontRenderer, this.displayString, this.x + this.width / 2, this.y + (this.height - 8) / 2, textColor);
        }
    }
}

